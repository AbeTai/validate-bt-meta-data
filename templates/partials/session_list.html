<div class="session-filter">
    <div class="filter-row"
         hx-get="/sessions"
         hx-target="#session-list"
         hx-swap="innerHTML"
         hx-trigger="change from:select, keyup changed delay:500ms from:input"
         hx-include=".filter-row">
        <input type="text" name="content" placeholder="コンテンツ名で検索"
               value="{{ filter_content|default('') }}" class="filter-input">
        <select name="device" class="filter-select">
            <option value="">全端末</option>
            <option value="iPhone" {{ 'selected' if filter_device|default('') == 'iPhone' }}>iPhone</option>
            <option value="Mac" {{ 'selected' if filter_device|default('') == 'Mac' }}>Mac</option>
            <option value="Windows" {{ 'selected' if filter_device|default('') == 'Windows' }}>Windows</option>
            <option value="Android" {{ 'selected' if filter_device|default('') == 'Android' }}>Android</option>
        </select>
        <select name="os_version" class="filter-select">
            <option value="">全OS</option>
        </select>
    </div>
</div>

{% if sessions %}
<table class="session-table" hx-boost="false">
    <thead>
        <tr>
            <th>ファイル名</th>
            <th>コンテンツ</th>
            <th>Web/アプリ</th>
            <th>端末</th>
            <th>OS</th>
            <th>トラック数</th>
            <th>CSV</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        {% for s in sessions %}
        <tr>
            <td><a href="/sessions/{{ s.filename }}" target="_blank" class="file-link">{{ s.filename }}</a></td>
            <td>{{ s.content_name }}</td>
            <td>{{ s.platform_type }}</td>
            <td>{{ s.device }}</td>
            <td>{{ s.os_version }}</td>
            <td>{{ s.track_count }}</td>
            <td><a href="/sessions/{{ s.filename }}/csv" class="csv-link">DL</a></td>
            <td>
                <button class="btn-delete"
                        hx-delete="/sessions/{{ s.filename }}"
                        hx-target="#session-list"
                        hx-swap="innerHTML"
                        hx-confirm="「{{ s.filename }}」を削除しますか？">x</button>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="no-sessions">保存されたセッションはまだありません</p>
{% endif %}
