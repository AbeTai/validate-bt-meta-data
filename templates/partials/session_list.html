{% if sessions %}
<table class="session-table">
    <thead>
        <tr>
            <th>ファイル名</th>
            <th>コンテンツ</th>
            <th>Web/アプリ</th>
            <th>端末</th>
            <th>OS</th>
            <th>トラック数</th>
        </tr>
    </thead>
    <tbody>
        {% for s in sessions %}
        <tr>
            <td><a href="javascript:void(0)" onclick="downloadFile('{{ s.filename }}')" class="file-link">{{ s.filename }}</a></td>
            <td>{{ s.content_name }}</td>
            <td>{{ s.platform_type }}</td>
            <td>{{ s.device }}</td>
            <td>{{ s.os_version }}</td>
            <td>{{ s.track_count }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<script>
function downloadFile(filename) {
    fetch('/sessions/' + filename)
        .then(r => r.blob())
        .then(blob => {
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = filename;
            a.click();
            URL.revokeObjectURL(a.href);
        });
}
</script>
{% else %}
<p class="no-sessions">保存されたセッションはまだありません</p>
{% endif %}
